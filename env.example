# SaleSpider Environment Configuration
# Copy this file to .env and customize the values for your deployment

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
# REQUIRED for all deployments

# Project and Compose Settings
COMPOSE_PROJECT_NAME=salespider
COMPOSE_FILE=.docker/docker-compose.yml

# Domain and Network Configuration (REQUIRED)
DOMAIN=salespider.local
HOST_IP=auto
HTTP_PORT=80
HTTPS_PORT=443

# CORS Configuration (space-separated list of allowed origins)
# List all origins (domains/IPs) that will access the application
# For local network: Add your domain and all device IPs that need access
# Example: "https://salespider.local https://192.168.1.133 https://192.168.1.150"
# For wildcard (less secure): Use "*" to allow all origins
ALLOWED_ORIGINS="https://salespider.local https://192.168.1.133"

# Data and Backup Paths
DATA_PATH=./data
BACKUP_PATH=./data/backups

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
# REQUIRED for all deployments

# Application Settings
NODE_ENV=production
APP_PORT=3000
LOG_LEVEL=info

# Security Configuration (REQUIRED - change these values!)
# Generate a secure JWT secret with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-long
TOKEN_EXPIRY=12h
COOKIE_SECURE=true
NEXTAUTH_SECRET=your-nextauth-secret-key-min-32-characters-long
NEXTAUTH_URL=https://salespider.local

# Rate Limiting Configuration (OPTIONAL)
# For self-hosted on trusted networks, you can disable rate limiting
# Set RATE_LIMITING_ENABLED=false to disable
RATE_LIMITING_ENABLED=true
RATE_LIMIT_MAX_ATTEMPTS=5
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_BLOCK_MS=3600000

# Super Admin Account (REQUIRED - change these values!)
SUPER_ADMIN_EMAIL=admin@salespider.local
SUPER_ADMIN_PASSWORD=ChangeThisPassword123!

# AI Configuration (OPTIONAL)
GEMINI_API_KEY=your-gemini-api-key-here

# Default App Settings (OPTIONAL - can be overridden in UI)
APP_NAME=SaleSpider
APP_LOGO=
PRIMARY_COLOR=#3b82f6
SECONDARY_COLOR=#10b981
ACCENT_COLOR=#f59e0b
CURRENCY=NGN
CURRENCY_SYMBOL=₦
VAT_PERCENTAGE=7.5
TIMEZONE=Africa/Lagos
DATE_FORMAT=dd/MM/yyyy
TIME_FORMAT=HH:mm
LANGUAGE=en
THEME=light
MAINTENANCE_MODE=false
SHOW_DELETED_PRODUCTS=false
ENABLED_PAYMENT_METHODS=CASH,CARD,MOBILE_MONEY,BANK_TRANSFER

# Client-side accessible settings (NEXT_PUBLIC_ prefix)
NEXT_PUBLIC_APP_NAME=SaleSpider
NEXT_PUBLIC_APP_LOGO=
NEXT_PUBLIC_PRIMARY_COLOR=#3b82f6
NEXT_PUBLIC_SECONDARY_COLOR=#10b981
NEXT_PUBLIC_ACCENT_COLOR=#f59e0b
NEXT_PUBLIC_CURRENCY=NGN
NEXT_PUBLIC_CURRENCY_SYMBOL=₦
NEXT_PUBLIC_VAT_PERCENTAGE=7.5
NEXT_PUBLIC_TIMEZONE=Africa/Lagos
NEXT_PUBLIC_DATE_FORMAT=dd/MM/yyyy
NEXT_PUBLIC_TIME_FORMAT=HH:mm
NEXT_PUBLIC_LANGUAGE=en
NEXT_PUBLIC_THEME=light
NEXT_PUBLIC_MAINTENANCE_MODE=false
NEXT_PUBLIC_SHOW_DELETED_PRODUCTS=false
NEXT_PUBLIC_ENABLED_PAYMENT_METHODS=CASH,CARD,MOBILE_MONEY,BANK_TRANSFER

# Feature Flags (OPTIONAL)
ENABLE_ANALYTICS=false
ENABLE_REPORTS=true
ENABLE_BARCODE_SCANNER=true
OFFLINE_MODE=true

# Performance Settings (OPTIONAL)
APP_MEMORY_LIMIT=2G
APP_CPU_LIMIT=2.0
APP_MEMORY_RESERVATION=1G
APP_CPU_RESERVATION=1.0
DATABASE_POOL_SIZE=10
DATABASE_TIMEOUT=30000
CACHE_TTL=3600

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Settings (REQUIRED for self-hosted database)
# For hosted database (Neon, Supabase, etc.), only DATABASE_URL is required
POSTGRES_DB=salespider
POSTGRES_USER=postgres
POSTGRES_PASSWORD=SecurePostgresPassword123!
POSTGRES_PORT=5432

# Database Connection (REQUIRED for all deployments)
# Self-hosted: Use the default value below (connects to Docker container)
# Hosted: Replace with your provider's connection string
DATABASE_URL="postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:${POSTGRES_PORT}/${POSTGRES_DB}?schema=public"

# PostgreSQL Performance Tuning (OPTIONAL - self-hosted only)
POSTGRES_MEMORY_LIMIT=1G
POSTGRES_CPU_LIMIT=1.0
POSTGRES_MEMORY_RESERVATION=512M
POSTGRES_CPU_RESERVATION=0.5
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=4MB
POSTGRES_MAINTENANCE_WORK_MEM=64MB
POSTGRES_MAX_CONNECTIONS=100
POSTGRES_MAX_WAL_SENDERS=3
POSTGRES_WAL_KEEP_SIZE=1GB

# PostgreSQL Logging (OPTIONAL - self-hosted only)
POSTGRES_LOG_STATEMENT=none
POSTGRES_LOG_MIN_DURATION_STATEMENT=1000

# =============================================================================
# SSL/HTTPS CONFIGURATION
# =============================================================================
# OPTIONAL - defaults are secure

# SSL Settings (using internal certificates)
SSL_ENABLED=true
FORCE_HTTPS=true

# Security Headers
SECURITY_HEADERS=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW="1m"

# =============================================================================
# BACKUP CONFIGURATION (pgBackRest)
# =============================================================================
# REQUIRED for self-hosted database | NOT APPLICABLE for hosted database

# Backup Repository Type - Choose one:
#   none   - No backup system (default, fastest setup)
#   posix  - Local filesystem backups (advisable to use another partition or external drive)
#   s3     - AWS S3 cloud backups (requires AWS credentials below)
#   azure  - Azure Blob Storage backups (requires Azure credentials below)
#   gcs    - Google Cloud Storage backups (requires GCS credentials below)
PGBACKREST_REPO1_TYPE=none
PGBACKREST_REPO1_PATH=/var/lib/pgbackrest

# Backup Schedule (OPTIONAL - cron format)
BACKUP_SCHEDULE_FULL="0 2 * * 0"

# Backup Retention (OPTIONAL)
BACKUP_RETENTION_FULL=7
BACKUP_RETENTION_DIFF=3

# Backup Resource Limits (OPTIONAL)
BACKUP_MEMORY_LIMIT=512M
BACKUP_CPU_LIMIT=0.5
BACKUP_MEMORY_RESERVATION=256M
BACKUP_CPU_RESERVATION=0.25

# =============================================================================
# CLOUD STORAGE CONFIGURATION (Optional - for remote backups)
# =============================================================================
# OPTIONAL - Only required if PGBACKREST_REPO1_TYPE is set to s3, azure, or gcs

# AWS S3 Configuration (required when PGBACKREST_REPO1_TYPE=s3)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_REGION=eu-north-1
AWS_S3_BUCKET=your-s3-bucket-name
AWS_S3_ENDPOINT=s3.eu-north-1.amazonaws.com

# Azure Blob Storage Configuration (required when PGBACKREST_REPO1_TYPE=azure)
# AZURE_STORAGE_ACCOUNT=
# AZURE_STORAGE_KEY=
# AZURE_STORAGE_CONTAINER=

# Google Cloud Storage Configuration (required when PGBACKREST_REPO1_TYPE=gcs)
# GCS_BUCKET=
# GCS_KEY=

# Logging (OPTIONAL)
ACCESS_LOG_ENABLED=true
ERROR_LOG_ENABLED=true

# =============================================================================
# DEVELOPMENT/DEBUGGING
# =============================================================================
# OPTIONAL - for development and testing

# Setup Options
SKIP_SEED=false
FORCE_RESET=false
# Set SETUP_BACKUP to false when using hosted database (Neon, Supabase, etc.)
SETUP_BACKUP=true
KEEP_RUNNING=false

# Development Settings (set to false in production)
DEBUG=false
VERBOSE_LOGGING=false
